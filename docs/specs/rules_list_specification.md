Workflow Rules List
===============

# Introduction

This document describes the specification used by Juneberry when expressing a set of "build rules" to
be used when building Juneberry experiments.

# Schema

```
Rule based version
{
    "description": <OPTIONAL: Human readable description of graph>,
    "format_version": <Linux style version string of the format of this file>,
    "timestamp": <OPTIONAL: time stamp (ISO format) for when this config was last modified.>
    "workflows": [
        {
            "name": "",
            "rules": [
                {
                    "clean_extras": [ <list of glob patterns of additional things to clean.> ]
                    "id": 0,
                    "doc": "short documentation string for the rule."
                    "inputs": [ <list of inputs> ],
                    "outputs": [ <list of outputs> ],
                    "command:": [ <list of command and arguments as strings> ]
                    "requirements": [ <list if pre-requisite rule ids >]
                }
            ]
        }
    ]
}
```

# Details
This section provides the details of each of the fields.

## description
**Optional** prose description of this data set.

## format_version
Linux-style version of **format** of the file. Not the version of 
the data, but the version of the semantics of the fields of this file. 
The current version: 0.1.0

## timestamp
**Optional** time stamp (ISO format) for when this config was last modified.

## workflows
This section contains a list of workflows that can be performed for the experiment.

### name
The name of this workflow.

### rules
A list of rules that are to be performed to complete this workflow.  The rules must be ordered such that, when executed
in the order provided, all the prerequisite inputs will be generated for subsequent rules. However, every “rules” entry
will not necessarily require every previous “rules” entry. Thus, the order can be a **depth-first** or **breadth-first**
representation of the dependencies.

#### clean_extras
Sometimes after a task we want to clean additional files that aren't necessarily known
ahead of time so they can be listed as explicit targets.  This property can be used
to list glob patterns such as `*.png` for finding additional pieces to clean.

#### id
A unique id of the rule.

#### doc
A short documentation string to display when listing rules or for log output.

#### inputs
A list of all input files that are required to execute this rule.

#### outputs
A list of outputs that are generated by this rule.

#### command
The command required to execute this rule.

#### requirements
A list of immediate pre-requisite rule ids required by this rule.


# Copyright

Copyright 2022 Carnegie Mellon University.  See LICENSE.txt file for license terms.
